apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: aws-load-balancer-controller-eks
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/KKamJi98/argocd.git   # ← 내 Git
    path: apps/aws-load-balancer-controller          # 차트 없음, 단순 디렉터리
    targetRevision: main
    helm:
      chart: aws-load-balancer-controller            # Helm remote chart
      repoURL: https://aws.github.io/eks-charts
      valueFiles:
        - values/common.yaml                         # Git repo 기준 경로
  # source:
  #   repoURL: https://aws.github.io/eks-charts
  #   chart: aws-load-balancer-controller
  #   targetRevision: 1.13.0
  #   helm:
  #     releaseName: aws-load-balancer-controller
  #     valueFiles:
  #       - values/common.yaml
  destination:
    name: kkamji-al2023
    namespace: kube-system
  syncPolicy:
    # automated:
    #   prune: true
    #   selfHeal: true
    syncOptions:
    - CreateNamespace=true
    - ServerSideApply=true